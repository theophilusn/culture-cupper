---
import Layout from "@/layouts/Layout.astro";
import TopBar from "@/components/TopBar.astro";
import Prose from "@/components/Prose.astro";
import LayoutSticky from "@/layouts/LayoutSticky.astro";
import BannerMessage from "@/components/BannerMessage.astro";
import { getCollection } from "astro:content";

const teamsCollection = await getCollection("teams");
type Team = {
  name: string
  points: number
}
const teams: Team[] = teamsCollection.map((team: any) => {
  return {name: team.data.name, points:team.data.points}
});

---

<Layout title="Teams" description="Participants in this clash">
  <TopBar />
  <main>
    <section class="mb-16 bg-zu-light-primary dark:bg-zu-dark-primary">
      <div class="wrapper">
        <div class="grid min-h-[18svh]">
          <BannerMessage>
            <p>It's a clash of the titans.</p>
          </BannerMessage>
        </div>
      </div>
    </section>
    <section>
      <div class="wrapper wrapper-divider *:pb-20-alt *:mb-12-alt">
        <Prose>
          <LayoutSticky>
            <div slot="left" class="h-full">
              <h1
                class="sticky top-8 text-[1.375rem] font-bold uppercase leading-[48px]"
              >
                / Teams
              </h1>
            </div>
            <div slot="right" class="mt-2.5">
              <h2
                class="text-body-2 mb-0 text-zu-light-body-text dark:text-zu-dark-body-text"
              >
                They fight, for the right, to spend money.
              </h2>
            </div>
          </LayoutSticky>
          <LayoutSticky>
            <div slot="left" class="h-full">
              <h1
                class="sticky top-8 text-[1.375rem] font-bold uppercase leading-[48px]"
              >
                / Points
              </h1>
            </div>
            <div slot="right" class="mt-2.5">
              <h2
                class="text-body-2 mb-0 text-zu-light-body-text dark:text-zu-dark-body-text"
              >
                How things are breaking down:
              </h2>

              <div
                class="w-full bg-white rounded-lg shadow dark:bg-gray-800 p-4 md:p-6 mt-12"
              >
                <div id="column-chart"></div>
              </div>
            </div>
          </LayoutSticky>
        </Prose>
      </div>
    </section>
  </main>
</Layout>

<script>
  import ApexCharts from "apexcharts";

  const options = {
    colors: ["#1A56DB"],
    series: [
      {
        name: "Points",
        color: "#1A56DB",
        data: [
          { x: "zu-rassic Park", y: 231 },
          { x: "The Standard", y: 122 },
          { x: "Karen's Favourites + Brian O.", y: 63 },
          { x: "MS Paint 2.0", y: 421 }
        ],
      },
    ],
    chart: {
      type: "bar",
      height: "320px",
      fontFamily: "Inter, sans-serif",
      toolbar: {
        show: false,
      },
    },
    plotOptions: {
      bar: {
        horizontal: false,
        columnWidth: "70%",
        borderRadiusApplication: "end",
        borderRadius: 8,
      },
    },
    tooltip: {
      shared: true,
      intersect: false,
      style: {
        fontFamily: "Inter, sans-serif",
      },
    },
    states: {
      hover: {
        filter: {
          type: "darken",
          value: 1,
        },
      },
    },
    stroke: {
      show: true,
      width: 0,
      colors: ["transparent"],
    },
    grid: {
      show: false,
      strokeDashArray: 4,
      padding: {
        left: 2,
        right: 2,
        top: -14,
      },
    },
    dataLabels: {
      enabled: false,
    },
    legend: {
      show: false,
    },
    xaxis: {
      floating: false,
      labels: {
        show: true,
        style: {
          fontFamily: "Inter, sans-serif",
          cssClass: "text-xs font-normal fill-gray-500 dark:fill-gray-400",
        },
      },
      axisBorder: {
        show: false,
      },
      axisTicks: {
        show: false,
      },
    },
    yaxis: {
      show: false,
    },
    fill: {
      opacity: 1,
    },
  };

  if (
    document.getElementById("column-chart") &&
    typeof ApexCharts !== "undefined"
  ) {
    const chart = new ApexCharts(
      document.getElementById("column-chart"),
      options,
    );
    chart.render();
  }
</script>
